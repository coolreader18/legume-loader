legumeload=function(){var entry=document.currentScript.dataset.legumeEntry;var AsyncFunction;try{AsyncFunction=Object.getPrototypeOf(eval("async () => {}")).constructor}catch(e){}function processurl(e){e=new URL(e);let t=["github","npm"];for(let r=0;r<t.length;r++){let s=t[r];if(e.protocol==`${s}:`){return`https://cdn.jsdelivr.net/${s=="github"?"gh":s}/${e.replace(new RegExp(`${s}:`),"").trim()}`}}return e.trim()}function load(e,t){e=processurl(e);let r;try{r=new URL(e)}catch(t){if(t.message=="Failed to construct 'URL': Invalid URL"){r=new URL(e,location.href)}}return fetch(r).then(e=>{if(e.ok){return e}else{throw new Error(t)}}).catch(alert)}var legume={version:"dev",scripts:{},dir:{scripts:{update(){legume.json(scriptdirurl).then(e=>{delete this.unloaded;return Object.assign(this,e)})},get(e){var t=this[e];return t.url.replace(/%VERSION/,t.latest)},unloaded:true},styles:{update(){legume.json(styledirurl).then(e=>{delete this.unloaded;return Object.assign(this,e)})},get(e){var t=this[e];return t.url.replace(/%VERSION/,t.latest)},unloaded:true}},load(e,t){if(typeof e=="string"){e=e.trim()}function r(e){let t=["json","text","script"];for(let r=0;r<t.length;r++){let s=t[r];if(e.startsWith(`${s}:`)){return legume[s](e.replace(new RegExp(`${s}:`),"").trim())}}return legume.script(e)}if(typeof t=="string"){switch(t){case"script":return legume.script(e);case"json":return legume.json(e);case"text":return legume.text(e);case"txtscript":return legume.process(e)}}if(typeof e=="string"){return r(e)}else if(Array.isArray(e)){let t=[];e.forEach(e=>t.push(r(e)));return Promise.all(t)}},process(...e){return Promise.resolve().then(()=>{var t=parse(...e),r=t.metadata,s=t.code,n=new Promise(e=>{if(!r.script){e()}else{let s=r.script;t(0);function t(r){return legume.script(s[r]).then(()=>{if(s.length!=r+1){t(r+1)}else{e()}})}}});if(r.style){r.style.forEach(legume.style)}["var","async"].forEach(e=>{t[e]=t.metadata[e];delete t.metadata[e]});t.var=t.var||[];t.var=t.var.reduce((e,t)=>{var r=t.split(" ");e[r[0]]=r[1]||r[0];return e},{});var l={exports:{}},i=l.exports,a={module:l,exports:i};return n.then(()=>{var e;if(t.legumescript&&t.metadata.name){let n=legume.scripts[r.name]=legume.scripts[r.name]||t;n.clicks=n.clicks+1||0;e=Promise.resolve().then(()=>new((()=>{if(t.async){if(AsyncFunction){return AsyncFunction}else{throw new Error("Async Functions not supported in this browser")}}else{return Function}})())(...Object.values(t.var),s).apply(n,Object.keys(t.var).map(e=>a[e])))}else{eval.call(null,s);e=Promise.resolve()}return e.then(()=>!Object.getOwnPropertyNames(l.exports).length&&!Object.getOwnPropertySymbols(l.exports).length?undefined:l.exports)})})},script(e){const t=e=>load(e,"Couldn't load the script.").then(e=>e.text()).then(legume.process);if(e.startsWith("dir:")){e=e.replace(/dir:/,"").trim();return Promise.resolve().then(()=>legume.dir.scripts.unloaded?legume.dir.scripts.update():legume.dir.scripts).then(r=>t(r.get(e)))}else{return t(e)}},style(e){e=processurl(e);const t=e=>{l.href=e;document.head.append(l)};l=document.createElement("link");l.rel="stylesheet";if(e.startsWith("dir:")){e=e.replace(/dir:/,"").trim();return Promise.resolve().then(()=>legume.dir.styles.unloaded?legume.dir.styles.update():legume.dir.styles).then(r=>t(r.get(e)))}else{return t(e)}},json(e){return load(e,"Couldn't load JSON.").then(e=>e.json())},text(e){return load(e,"Couldn't load text.").then(e=>e.text())}};window.Legume=legume;if(entry)legume.load(entry);function parse(e,t){var r=false,s={cmt:/^(\s*\/\/\s*)/,multi:{start:/^(\s*\/\*\s*@legume\s*)/i,end:/^\s*\*\//},single:{start:/\s*@legume\s*/,match:/\s*@[^@]*/g}},n={name:"",version:"",description:"",repository:"",author:[],email:"",url:"",license:"",script:[],style:[],var:[],async:false},l={},i=[],a=[],c=false,o=e=>{var t=e.trim().match(/@([^\s]+)(?:\s+(.*))?$/);if(t){var r=t[1],s=t[2];if(r!==undefined){if(Array.isArray(n[r])){l[r]=l[r]||[];l[r].push(s)}else if(typeof n[r]=="boolean"){try{l[r]=JSON.parse(s)}catch(e){l[r]=true}}else{l[r]=s}}else{console.warn(`ignoring invalid metadata option: \`${r}\``)}}};e.match(/[^\r\n]+/g).forEach((e,t,n)=>{if(s.cmt.test(e)){var l=e.replace(s.cmt,"").trim();if(s.single.start.test(l)){l.replace(s.single.start,"");for(var u=s.single.match.exec(l);u;u=s.single.match.exec(l)){o(u[0])}}}else if(s.multi.end.test(e)&&r){r=false}else if(r){o(e)}else if(s.multi.start.test(e)){r=true;c=true}else{i.push(e)}if(r&&t+1==n.length){a.push("missing metdata block closing")}});return{metadata:Object.assign(l,t),code:i.join("\n"),errors:a.length?a:null,legumescript:c}}};(function(){var e="https://polyfill.io/v2/polyfill.min.js?features=default-3.6,fetch?callback=legumeload";var t=document.createElement("script");t.src=e;document.body.append(t)})();