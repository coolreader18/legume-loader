window.legumeload=function(){delete window.legumeload;var entry=document.querySelector("script[src*=legume]");function parseURL(e){try{e=new URL(e)}catch(r){if(r.message=="Failed to construct 'URL': Invalid URL"){e=new URL(e,location.href)}}var r={};var t=["github","npm"];for(var s=0;s<t.length;s++){var a=t[s];if(e.protocol==a+":"){return{url:new URL("https://cdn.jsdelivr.net/"+(a=="github"?"gh":a)+"/"+e.pathname),name:e.pathname.split("/")[a=="github"?1:0].split("@")[0],version:e.pathname.split("/")[a=="github"?1:0].split("@")[1]||"latest",method:a,legumescript:a=="npm"?true:undefined}}}return{url:e}}var legume=Object.assign(function e(r,t){var s={};Object.assign(s,parseURL(r));parse(s);s.name=s.name||s.metadata.name;return e.scripts[s.name]?require(s.name):fetch(s.url).then(function(e){return e.text()}).then(function(r){s.code=r;e.scripts[s.name]=s;var a=Promise.resolve(),n=s.requires;if(n.styles)n.styles.forEach(function(e){e=parseURL(e).url;document.head.appendChild(Object.assign(document.createElement("link"),{rel:"stylesheet",href:e.href}))});if(n.scripts)a=a.then(function(){return Promise.all(n.scripts.reduce(function(r,t){r.push(e(t.script,true));return r},[]))});return a.then(function(){if(!t)require(s.name)})})},{version:"dev",scripts:{},cache:{},require:require,global:{}});window.Legume=legume;if(entry&&entry.getAttribute("data-legume-entry"))Legume(entry.getAttribute("data-legume-entry"));function require(mod){mod=legume.scripts[mod];if(mod){if(legume.cache[mod.name])return legume.cache[mod.name];var possargs={module:{exports:{}},require:require,global:legume.global};possargs.exports=possargs.module.exports;var passargs=["module","exports","require","global"];var requires=mod.requires;if(requires.scripts){requires.scripts.forEach(function(e){if(e.as&&!Object.keys(possargs).includes(e.as)){possargs[e.as]=require(parseURL(e.script).name);passargs.push(e.as)}})}var code=mod.code+(mod.url?"\n//# sourceURL="+mod.url:"");if(mod.legumescript){Function.apply(null,passargs.concat([code])).apply(legume.global,passargs.reduce(function(e,r){e.push(possargs[r]);return e},[]));legume.cache[mod.name]=possargs.module.exports;return possargs.module.exports}else{return eval(code)}}}function parse(e){var r=false,t={start:/^(\s*\/\*\s*@legume\s*)/i,end:/^\s*\*\//},s={name:"",version:"",description:"",repository:"",author:[],email:"",url:"",license:"",script:[],style:[]},a={},n=[],i=[],l=function(e){var r=e.trim().match(/@([^\s]+)(?:\s+(.*))?$/);if(r){var t=r[1],n=r[2];if(t!==undefined){if(Array.isArray(s[t])){a[t]=a[t]||[];a[t].push(n)}else if(typeof s[t]=="boolean"){try{a[t]=JSON.parse(n)}catch(e){a[t]=true}}else{a[t]=n}}else{console.warn("ignoring invalid metadata option: `"+t+"}`")}}};e.code.match(/[^\r\n]+/g).forEach(function(s,a,o){if(t.end.test(s)&&r){r=false}else if(r){l(s)}else if(t.start.test(s)){r=true;e.legumescript=true}else{n.push(s)}if(r&&a+1==o.length){i.push("missing metdata block closing")}});var o={scripts:a.script,styles:a.style};delete a.script;delete a.style;if(o.scripts)o.scripts.forEach(function(e,r){var t=e.split(" ");var s={};for(var a=1;a<t.length;a+=2){var n=t.slice(a,a+2);s[n[0]]=n[1]}o.scripts[r]={script:t[0],as:s.as||null}});return Object.assign(e,{metadata:a,code:n.join("\n"),errors:i.length?i:null,requires:o})}};(function(){var e="https://polyfill.io/v2/polyfill.min.js?features=default-3.6,fetch,Element.prototype.dataset,Object.values,Object.entries&callback=legumeload";var r=document.createElement("script");r.src=e;document.getElementsByTagName("head")[0].appendChild(r)})();