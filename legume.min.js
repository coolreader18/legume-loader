legumeload=function(){delete legumeload;function _throw(e){throw e}var entry=document.querySelector("script[src*=legume]");var AsyncFunction;try{AsyncFunction=Object.getPrototypeOf(eval("async () => {}")).constructor}catch(e){}function processurl(e){var t;try{e=new URL(e)}catch(r){if(r.message=="Failed to construct 'URL': Invalid URL"){t=e;e=new URL(e,location.href)}}var r=["github","npm"];for(var n=0;n<r.length;n++){var s=r[n];if(e.protocol==s+":"){return{url:{fullURL:"https://cdn.jsdelivr.net/"+(s=="github"?"gh":s)+"/"+e.pathname},method:s}}}return{url:{fullURL:e.href,relURL:t}}}function load(e,t,r,n){n=Object.assign(processurl(e),n||{});var s=n.url;return fetch(s.fullURL).then(function(e){if(e.ok){return e[r]()}else{throw new Error(t)}}).then(function(e){return{res:e,md:n}}).catch(alert)}var legume={version:"dev",scripts:{},load:function e(t,r){if(typeof t=="string"){t=t.trim()}function n(e){var t=["json","text","script"];for(var r=0;r<t.length;r++){var n=t[r];if(e.startsWith(n+":")){return legume[n](e.replace(new RegExp(n+":"),"").trim())}}return legume.script(e)}if(typeof r=="string"){return{script:legume.script,json:legume.json,text:legume.text,txtscript:function(e){return legume.process({res:e})}}[r](t)}if(typeof t=="string"){return n(t)}else if(Array.isArray(t)){var s=[];t.forEach(function(e){s.push(n(e))});return Promise.all(s)}},process:function e(t,r){return Promise.resolve().then(function(){var e=parse(t.res,Object.assign({},t.md,r)),n=e.metadata,s=e.code,a=new Promise(function(e){if(!n.script){e()}else{var t=n.script;var r={};s(0);function s(n){var a=t[n];return legume.script(a.script).then(function(c){r[a.as]=c;if(t.length!=n+1){s(n+1)}else{e(r)}})}}});if(n.style){n.style.forEach(legume.style)}["var","async","url","method"].forEach(function(t){e[t]=e.metadata[t];delete e.metadata[t]});var c=e.url;if(c){s+=c.fullURL?"\n//# sourceURL="+c.fullURL:""}e.var=e.var||[];e.var=e.var.reduce(function(e,t){var r=t.split(" ");e[r[0]]=r[1]||r[0];return e},{});var i={exports:{}},o=i.exports,l={module:i,exports:o};return a.then(function(t){var r=(n.script||[]).reduce(function(e,r,n){if(r.name)e[r.name]=Object.values(t)[n];return e},{});Object.assign(l,t,{require:function e(t){return r[t]}});Object.assign(e.var,Object.keys(t||{}).reduce(function(e,t){e[t]=t;return e},{}));var a;if(e.legumescript&&e.metadata.name||e.method=="npm"){var c=legume.scripts[n.name]=legume.scripts[n.name]||e;c.clicks=c.clicks+1||0;a=Promise.resolve().then(function(){return(new(Function.prototype.bind.apply(e.async?AsyncFunction?AsyncFunction:_throw(new Error("Async Functions not supported in this browser")):Function,[null].concat(Object.values(e.var)).concat(e.method=="npm"?["module","exports"]:[]).concat([s])))).apply(c,Object.keys(e.var).concat(e.method=="npm"?["module","exports"]:[]).map(function(e){return l[e]}))})}else{eval.call(null,s);a=Promise.resolve()}return a.then(function(){return!Object.getOwnPropertyNames(i.exports).length&&!Object.getOwnPropertySymbols(i.exports).length?undefined:i.exports})})})},script:function e(t){return load(t,"Couldn't load the script.","text").then(legume.process)},style:function e(t){var r=document.createElement("link");r.href=processurl(t);document.head.append(r);r.rel="stylesheet"},json:function e(t){return load(t,"Couldn't load JSON.","json").then(function(e){return e.res})},text:function e(t){return load(t,"Couldn't load text.").then(function(e){return e.res})}};window.Legume=legume;if(entry)legume.load(entry);function parse(e,t){var r=false,n={cmt:/^(\s*\/\/\s*)/,multi:{start:/^(\s*\/\*\s*@legume\s*)/i,end:/^\s*\*\//},single:{start:/\s*@legume\s*/,match:/\s*@[^@]*/g}},s={name:"",version:"",description:"",repository:"",author:[],email:"",url:"",license:"",script:[],style:[],var:[],async:false},a={},c=[],i=[],o=false,l=function(e){var t=e.trim().match(/@([^\s]+)(?:\s+(.*))?$/);if(t){var r=t[1],n=t[2];if(r!==undefined){if(Array.isArray(s[r])){a[r]=a[r]||[];a[r].push(n)}else if(typeof s[r]=="boolean"){try{a[r]=JSON.parse(n)}catch(e){a[r]=true}}else{a[r]=n}}else{console.warn("ignoring invalid metadata option: `"+r+"}`")}}};e.match(/[^\r\n]+/g).forEach(function(e,t,s){if(n.cmt.test(e)){var a=e.replace(n.cmt,"").trim();if(n.single.start.test(a)){a.replace(n.single.start,"");for(var u=n.single.match.exec(a);u;u=n.single.match.exec(a)){l(u[0])}}}else if(n.multi.end.test(e)&&r){r=false}else if(r){l(e)}else if(n.multi.start.test(e)){r=true;o=true}else{c.push(e)}if(r&&t+1==s.length){i.push("missing metdata block closing")}});var u=Object.assign(a,t);if(u.script)u.script.forEach(function(e,t){var r=e.split(" ");var n={};for(var s=1;s<r.length;s+=2){var a=r.slice(s,s+2);n[a[0]]=a[1]}u.script[t]={script:r[0],as:n.as,name:n.name}});return{metadata:u,code:c.join("\n"),errors:i.length?i:null,legumescript:o}}var entryScript=entry.dataset.legumeEntry;if(entryScript){Legume.script(entryScript)}};(function(){var e="https://polyfill.io/v2/polyfill.min.js?features=default-3.6,fetch,Element.prototype.dataset,Object.values,Object.entries&callback=legumeload";var t=document.createElement("script");t.src=e;document.getElementsByTagName("head")[0].appendChild(t)})();