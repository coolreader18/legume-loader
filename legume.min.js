window.legumeload=function(root){var entry=legumeload.curscr;var root=legumeload.root;delete window.legumeload;function parseURL(e){try{e=new URL(e)}catch(r){if(r.message=="Failed to construct 'URL': Invalid URL"){e=new URL(e,location.href)}}var r={};var t=["github","npm"];for(var s=0;s<t.length;s++){var n=t[s];if(e.protocol==n+":"){return{url:new URL("https://cdn.jsdelivr.net/"+(n=="github"?"gh":n)+"/"+e.pathname),name:e.pathname.split("/")[n=="github"?1:0].split("@")[0],version:e.pathname.split("/")[n=="github"?1:0].split("@")[1]||"latest",method:n,legumescript:n=="npm"?true:undefined}}}return{url:e}}var legume=Object.assign(function e(r,t){var s={};Object.assign(s,parseURL(r));return e.scripts[s.name]?require(s.name):fetch(s.url).then(function(e){return e.text()}).then(function(r){s.code=r;return e.process(s,t)})},{version:"dev",scripts:{},cache:{},require:require,global:{require:require},style:function e(r){r=parseURL(r).url;document.head.appendChild(Object.assign(document.createElement("link"),{rel:"stylesheet",href:r}))},process(e,r){if(typeof e=="string")e={code:e};parse(e);e.name=e.name||e.metadata.name;if(legume.scripts[e.name])if(!r){return require(e.name)}else return;legume.scripts[e.name]=e;var t=Promise.resolve(),s=e.requires;if(s.styles)s.styles.forEach(legume.style);if(s.scripts)t=t.then(function(){return Promise.all(s.scripts.reduce(function(e,r){e.push(legume(r.script,true));return e},[]))});return t.then(function(){if(!r)require(e.name)})}});legume.global.global=legume.global;function require(mod){mod=legume.scripts[mod];if(mod){if(legume.cache[mod.name])return legume.cache[mod.name];var module={exports:{},children:{},require:function e(r){this.children[r]=legume.scripts[r];return e(r)}};var possargs={module:module,require:module.require,exports:module.exports};var passargs=["module","exports"];var requires=mod.requires;if(requires.scripts){requires.scripts.forEach(function(e){if(e.as&&!Object.keys(possargs).includes(e.as)){possargs[e.as]=require(parseURL(e.script).name);passargs.push(e.as)}})}var code=mod.code+(mod.url?"\n//# sourceURL="+mod.url:"");if(mod.legumescript){eval("with(Legume.global)("+Function.apply(null,passargs.concat([code])).toString()+")").apply(legume.global,passargs.reduce(function(e,r){e.push(possargs[r]);return e},[]));legume.cache[mod.name]=possargs.module.exports;return possargs.module.exports}else{return eval(code)}}}function parse(e){var r=false,t={start:/^(\s*\/\*\s*@legume\s*)/i,end:/^\s*\*\//},s={name:"",version:"",description:"",repository:"",author:[],email:"",url:"",license:"",script:[],style:[]},n={},o=[],i=[],a=function(e){var r=e.trim().match(/@([^\s]+)(?:\s+(.*))?$/);if(r){var t=r[1],o=r[2];if(t!==undefined){if(Array.isArray(s[t])){n[t]=n[t]||[];n[t].push(o)}else if(typeof s[t]=="boolean"){try{n[t]=JSON.parse(o)}catch(e){n[t]=true}}else{n[t]=o}}else{console.warn("ignoring invalid metadata option: `"+t+"}`")}}};e.code.match(/[^\r\n]+/g).forEach(function(s,n,l){if(t.end.test(s)&&r){r=false}else if(r){a(s)}else if(t.start.test(s)){r=true;e.legumescript=true}else{o.push(s)}if(r&&n+1==l.length){i.push("missing metdata block closing")}});var l={scripts:n.script,styles:n.style};delete n.script;delete n.style;if(l.scripts)l.scripts.forEach(function(e,r){var t=e.split(" ");var s={};for(var n=1;n<t.length;n+=2){var o=t.slice(n,n+2);s[o[0]]=o[1]}l.scripts[r]={script:t[0],as:s.as||null}});return Object.assign(e,{metadata:n,code:o.join("\n"),errors:i.length?i:null,requires:l})}root.Legume=legume;if(entry)if(entry.getAttribute("data-legume-entry"))legume(entry.getAttribute("data-legume-entry"));else if(entry.getAttribute("data-legume-text")!==null)legume.process(entry.textContent)};(function(){var e="https://polyfill.io/v2/polyfill.min.js?features=default-3.6,fetch,Element.prototype.dataset,Object.values,Object.entries&callback=legumeload";var r=document.createElement("script");r.src=e;document.getElementsByTagName("head")[0].appendChild(r);legumeload.root=typeof self=="undefined"?window:self;legumeload.curscr=document.currentScript||function(){var e="readyState"in document.createElement("script"),r=this.opera&&this.opera.toString()==="[object Opera]",t=typeof Object.defineProperty==="function",s=function(){var e=document.getElementsByTagName("script");for(var r=e.length;e[--r];){if(e[r].readyState==="interactive"){return e[r]}}return null};if(!e){throw new Error('Cannot polyfill `document.currentScript` as your browser does not support the "readyState" DOM property of script elements. Please see https://github.com/Financial-Times/polyfill-service/issues/952 for more information.')}if(r){throw new Error('Cannot polyfill `document.currentScript` as your Opera browser does not correctly support the "readyState" DOM property of script elements. Please see https://github.com/Financial-Times/polyfill-service/issues/952 for more information.')}if(!t){throw new Error("Cannot polyfill `document.currentScript` as your browser does not support `Object.defineProperty`. Please see https://github.com/Financial-Times/polyfill-service/issues/952 for more information.")}Object.defineProperty(document,"currentScript",{get:function e(){return s()},configurable:true})()}()})();